extends base

block vars
  - var title = 'thread'

block body
  h1 title: #{thread[0].threadTitle}
  p user: #{thread[0].moqaName}
  p date: #{thread[0].threadTimeStamp}
  p content: #{thread[0].threadContent}

  if user
    form(method="post" name="commentForm")
      input(type="hidden" id="commentParentId" name="commentParentId" value='')
      span New Comment:
      input(type="text", name="commentContent", required=true, id="commentContent")
      br

      input(type="submit" value="New Comment" id="submitComment")
      br
  else
    <a href = "/login">login</a> to post comments

  p Recent Comments
  br

  ul
    each comment, i in comments
      li
        p #{comment.commentContent}
        p #{comment.moqaName}  |  reply
        input(type="text", id = "replyContent#{comment._id}")
        <button type="button", onClick = 'reply(this)', value = "#{comment._id}">REPLY!</button>

  script(type='text/javascript' src='../public/js/reply.js')